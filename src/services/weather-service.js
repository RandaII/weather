const testResponse = {
  Chicago:{
    "lat": 33.44,
    "lon": -94.04,
    "timezone": "America/Chicago",
    "timezone_offset": -21600,
    "current": {
      "dt": 1618317040,
      "sunrise": 1618282134,
      "sunset": 1618333901,
      "temp": 11.07,
      "feels_like": 282.84,
      "pressure": 1019,
      "humidity": 62,
      "dew_point": 277.08,
      "uvi": 0.89,
      "clouds": 0,
      "visibility": 10000,
      "wind_speed": 6,
      "wind_deg": 300,
      "weather": [
        {
          "id": 500,
          "main": "Rain",
          "description": "light rain",
          "icon": "10d"
        }
      ],
      "rain": {
        "1h": 0.21
      }
    },
    "daily": [
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      }
    ]
  },
  Barnaul:{
    "lat": 33.44,
    "lon": -94.04,
    "timezone": "America/Chicago",
    "timezone_offset": -21600,
    "current": {
      "dt": 1638317040,
      "sunrise": 1618282134,
      "sunset": 1618333901,
      "temp": 18.07,
      "feels_like": 15.84,
      "pressure": 1019,
      "humidity": 62,
      "dew_point": 277.08,
      "uvi": 0.89,
      "clouds": 0,
      "visibility": 10000,
      "wind_speed": 6,
      "wind_deg": 300,
      "weather": [
        {
          "id": 500,
          "main": "Rain",
          "description": "light rain",
          "icon": "10d"
        }
      ],
      "rain": {
        "1h": 0.21
      }
    },
    "daily": [
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      },
      {
        "dt": 1618308000,
        "sunrise": 1618282134,
        "sunset": 1618333901,
        "moonrise": 1618284960,
        "moonset": 1618339740,
        "moon_phase": 0.04,
        "temp": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "feels_like": {
          "day": 7.79,
          "min": 275.09,
          "max": 284.07,
          "night": 2.09,
          "eve": 279.21,
          "morn": 5.49
        },
        "pressure": 1020,
        "humidity": 81,
        "dew_point": 276.77,
        "wind_speed": 3.06,
        "wind_deg": 294,
        "weather": [
          {
            "id": 500,
            "main": "Rain",
            "description": "light rain",
            "icon": "10d"
          }
        ],
        "clouds": 56,
        "pop": 0.2,
        "rain": 0.62,
        "uvi": 1.93
      }
    ]
  }
}

export default class WeatherService {

  currentWeatherPath = `https://api.openweathermap.org/data/2.5/weather?appid=61fdf6f7410c8d947a85a69de8f6587d`;
  weatherPath = `https://api.openweathermap.org/data/2.5/onecall?appid=61fdf6f7410c8d947a85a69de8f6587d&units=metric&lang=ru`;

  fetchForecast = async (city, forecastType) => {
    const coord = await this.fetchCityCoordinates(city);
    const path = this.weatherPath + `&lat=${coord.lat}&lon=${coord.lon}`
    return await fetch(path)
      .then((result) => result.json())
      .then((data) => data[forecastType]);
  }

  // fetchOneCallForecast = async (city) => {
  //   return await new Promise((resolve) =>{
  //     console.log(`ss`);
  //     resolve(testResponse[city])
  //   });
  // }

  fetchOneCallForecast = async (city) => {
    const coord = await this.fetchCityCoordinates(city);
    const path = this.weatherPath + `&lat=${coord.lat}&lon=${coord.lon}`
    return await fetch(path)
      .then((result) => result.json())
      .then((data) => data);
  }

  fetchCityCoordinates = async (city) => {
    return await fetch(this.currentWeatherPath + `&q=${city}`)
      .then((result) => result.json())
      .then((data) => data.coord)
  }
}